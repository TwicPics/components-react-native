{"mappings":"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","sources":["src/index.ts","src/components/TwicImg.tsx","src/_/parse.ts","src/_/install.ts","src/_/utils.ts","src/_/validate.ts","src/_/compute.ts"],"sourcesContent":["// src/index.ts\nimport TwicImg from './components/TwicImg';\nexport { default as installTwicPics } from './_/install';\nexport { TwicImg };\n","import React, { Component } from 'react';\nimport { View, Image, Text, StyleSheet } from 'react-native';\nimport {\n    parseAlt,\n    parseAnchor,\n    parseFocus,\n    parseMode,\n    parsePreTransform,\n    parseRatio,\n    parseSrc,\n    parseStep\n} from '../_/parse';\nimport {\n    computeAlt,\n    computeSize,\n    computeSrc,\n    computeStyle,\n    computeWrapperStyle\n} from '../_/compute';\nimport { config } from '../_/install';\nimport { Attributes, WrapperState } from '../_/types';\n\nexport interface WrapperAttributes extends Attributes {\n    width: number;\n    height: number;\n}\nconst TwicWrapper = (props: WrapperAttributes) => {\n    let width, height;\n    ({ width, height } = props);\n    const alt = parseAlt(props.alt);\n    const anchor = parseAnchor(props.anchor);\n    const focus = parseFocus(props.focus);\n    const mode = parseMode(props.mode);\n    const preTransform = parsePreTransform(props.preTransform);\n    const ratio = parseRatio(props.ratio);\n    const src = parseSrc(props.src);\n    const step = parseStep(props.step);\n\n    const size = computeSize(width, height, ratio);\n    const computedSrc =\n        size.width && computeSrc(anchor, focus, mode, preTransform, size, src, step);\n    console.log('computedSrc', computedSrc);\n    if (computedSrc) {\n        return (\n            <View style={computeWrapperStyle(size, styles)}>\n                <Image\n                    accessibilityLabel={computeAlt(alt, src)}\n                    source={{ uri: computedSrc }}\n                    resizeMode={mode}\n                    style={styles.img}\n                />\n                {config.debug && (\n                    <View style={styles.debug}>\n                        <Text>\n                            Debug {width} {height} - {computedSrc} - {JSON.stringify(props)}\n                        </Text>\n                    </View>\n                )}\n            </View>\n        );\n    } else {\n        return null;\n    }\n};\nexport default class TwicImg extends Component<Attributes, WrapperState> {\n    constructor(props: Attributes) {\n        super(props);\n        this.state = {\n            width: 0,\n            height: 0\n        };\n    }\n    render() {\n        const { props } = this;\n        const ratio = parseRatio(props.ratio);\n        const style = computeStyle(props.style, ratio);\n        return (\n            <View\n                style={StyleSheet.flatten([styles.layout, style])}\n                onLayout={(event) => {\n                    let { x, y, width, height } = event.nativeEvent.layout;\n                    console.log('onLayout', x, y, width, height);\n                    this.setState({\n                        width: width,\n                        height: height\n                    });\n                }}\n            >\n                <TwicWrapper {...props} width={this.state.width} height={this.state.height} />\n            </View>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    debug: {\n        width: '100%',\n        position: 'absolute',\n        backgroundColor: '#cccccc'\n    },\n    img: {\n        width: '100%',\n        height: '100%',\n        position: 'absolute',\n        top: 0\n    },\n    layout: {\n        overflow: `hidden`,\n        width: '100%',\n\n        backgroundColor: '#FF0000'\n    },\n    wrapper: {\n        overflow: `hidden`,\n        width: '100%'\n    }\n});\n","import { config } from './install';\nimport { AnchorObject, Mode } from './types';\nimport { regExpFinderFactory, trimRegExpFactory } from './utils';\nimport { rValidMode, rValidRatio } from './validate';\n\nconst isPositiveNumber = (value: number) => !isNaN(value) && value > 0;\nconst trimOrUndefined = regExpFinderFactory<string | undefined>(trimRegExpFactory(`.+?`));\nconst trimTransformOrUndefined = trimRegExpFactory(`.+?`, `[\\\\s\\\\/]`);\n\nexport const parseAlt = trimOrUndefined;\n\nconst rAnchor = /\\b(?:(left|right)|(bottom|top))\\b/g;\nexport const parseAnchor = (anchor: string | undefined): AnchorObject => {\n    const trimmed = anchor ? trimOrUndefined(anchor) : undefined;\n    let x;\n    let y;\n    if (trimmed) {\n        let tmp;\n        while ((tmp = rAnchor.exec(trimmed))) {\n            if (tmp[1]) {\n                x = tmp[1];\n            } else {\n                y = tmp[2];\n            }\n        }\n    }\n    return {\n        x,\n        y\n    };\n};\nexport const parseFocus = trimOrUndefined;\nexport const parseMode = regExpFinderFactory<Mode | undefined>(rValidMode);\nexport const parsePreTransform = regExpFinderFactory<string | undefined>(\n    trimTransformOrUndefined,\n    (p) => p && `${p}/`\n);\nexport const parseRatio = (value: number | string = 1): number | undefined => {\n    if (value === `none`) {\n        return undefined;\n    }\n    let number: number | undefined;\n    if (typeof value === `number`) {\n        number = value;\n    } else if (value) {\n        const parsed = rValidRatio.exec(value);\n        if (parsed) {\n            const [, , width, height] = parsed;\n            number = (height ? Number(height) : 1) / Number(width);\n        } else {\n            number = 1;\n        }\n    }\n    return number ? (isPositiveNumber(number) ? number : undefined) : undefined;\n};\n\nconst rImage = /^(image:)?\\/*/;\nexport const parseSrc = (value: string): string => {\n    const tmp = trimOrUndefined(value);\n    return tmp ? tmp.replace(rImage, `image:${config.path}`) : `placeholder:red`;\n};\n\nexport const parseStep = (value: number | string | undefined): number => {\n    let tmp: any;\n    if (typeof value !== `number`) {\n        const trimmed = trimOrUndefined(value);\n        // eslint-disable-next-line no-param-reassign\n        tmp = trimmed && Number(trimmed);\n    } else {\n        tmp = value;\n    }\n    return isPositiveNumber(tmp) ? tmp : undefined;\n};\n","import { Options } from './types';\nimport { throwError } from './utils';\n\nexport const config: {\n    debug: boolean;\n    domain: string | undefined;\n    path: string;\n    output: string | undefined;\n    step: number;\n} = {\n    debug: false,\n    domain: undefined,\n    path: '',\n    output: undefined,\n    step: 20\n};\n\nconst rInvalidPath = /\\?/;\nconst rValidDomain = /(^https?:\\/\\/[^/]+)\\/?$/;\nconst rValidStep = /^[1-9][0-9]*/;\n\nexport default (options: Options): void => {\n    if (!options) {\n        throwError(`install options not provided`);\n    }\n    const { domain, debug, path, step } = options;\n\n    if (!domain || !rValidDomain.test(domain)) {\n        throwError(`install domain \"${domain}\" is invalid`);\n    }\n\n    if (path) {\n        if (rInvalidPath.test(path)) {\n            throwError(`install path \"${path}\" is invalid`);\n        }\n        config.path = path.replace(/^\\/?(.+?)\\/?$/, `$1/`);\n    }\n\n    if (step) {\n        if (!rValidStep.test(step.toString())) {\n            throwError(`install step \"${step}\" is invalid`);\n        }\n        config.step = step;\n    }\n\n    config.debug = debug;\n    if (domain) {\n        config.domain = domain.replace(rValidDomain, `$1`);\n    }\n};\n","const buildErrorMessage = (message: string): string =>\n    `twicpics-react-native-components ${message}`;\n\nexport const regExpFinderFactory =\n    <T = string>(regExp: RegExp, filter: ((value: T) => T) | undefined = undefined) =>\n    (value: T | string): T => {\n        let found: any;\n        if (value) {\n            `${value}`.replace(regExp, (_, v) => (found = v));\n        }\n        return filter ? filter(found) : found;\n    };\n\nexport const throwError = (message: string): never => {\n    throw new Error(buildErrorMessage(message));\n};\n\nexport const trimRegExpFactory = (items: Array<string> | string, border = `\\\\s`): RegExp =>\n    new RegExp(`^(?:${border})*(${Array.isArray(items) ? items.join(`|`) : items})(?:${border})*$`);\n","import { trimRegExpFactory } from './utils';\n\nexport const validModes = [`contain`, `cover`];\nexport const rValidMode = trimRegExpFactory(validModes);\nexport const rValidRatio = trimRegExpFactory(\n    `(\\\\d+(?:\\\\.\\\\d+)?)(?:\\\\s*[\\\\/:]\\\\s*(\\\\d+(?:\\\\.\\\\d+)?))?|(none)`\n);\n","import { PixelRatio, Platform, StyleSheet } from 'react-native';\nimport { config } from './install';\nimport { AnchorObject, Mode, SizeObject } from './types';\nconst output = undefined;\nconst VERSION = `v1`;\n\nconst actualWidth = (w: number, _step: number): number => {\n    const step = _step || config.step;\n    return Math.max(step, step * Math.floor(w / step));\n};\n\nconst actualSize = (size: SizeObject, step: number): SizeObject => {\n    const pixelRatio = Math.min(Math.max(1, PixelRatio.get()), 2);\n    const _actualWidth = actualWidth(size.width, step) * pixelRatio;\n    console.log('size and pixelRatio', size, pixelRatio);\n    let _actualHeight = size.ratio ? _actualWidth * size.ratio : size.height * pixelRatio;\n    console.log('_actual', _actualWidth, _actualHeight);\n    return {\n        width: Math.round(_actualWidth),\n        height: Math.round(_actualHeight),\n        ratio: size.ratio\n    };\n};\n\nconst rAlt = /\\/?([^/?#.]+)(?:\\.[^/?#]*)?(?:[?#].*)?$/;\nexport const computeAlt = (alt: string | undefined, src: string): string => {\n    if (!alt) {\n        const tmp = rAlt.exec(src);\n        alt = (tmp && tmp[1]) || `image`;\n    }\n    return alt;\n};\n\nconst computePreTransform = (\n    { x, y }: AnchorObject,\n    focus: string | undefined,\n    mode: Mode,\n    preTransform = ``\n) => {\n    const actualFocus = mode !== `contain` && (focus || (y ? (x ? `${y}-${x}` : y) : x));\n    return `${preTransform || ``}${actualFocus ? `focus=${actualFocus}/` : ``}`;\n};\n\nexport const computeSize = (\n    width: number,\n    height: number,\n    ratio: number | undefined\n): SizeObject => {\n    return {\n        height: ratio ? width * ratio : height,\n        ratio,\n        width\n    };\n};\n\nconst rNoCatchAll = /^v[0-9]+(?:\\/|$)|^(rel:)/;\nconst rPath = /^(?:image:)?(\\/*)(.*)$/;\nconst rQuery = /\\?/;\nexport const computeSrc = (\n    anchor: AnchorObject,\n    focus: string | undefined,\n    mode: Mode = `cover`,\n    preTransform = ``,\n    size: SizeObject,\n    src: string,\n    step: number\n) => {\n    const { width, height } = actualSize(size, step);\n    const [, , path] = rPath.exec(src) || [];\n    const noCatchAll = rNoCatchAll.exec(path);\n    const noQuery = !rQuery.test(path);\n\n    const { debug, domain } = config;\n    const transform = `${computePreTransform(\n        anchor,\n        focus,\n        mode,\n        preTransform\n    )}${mode}=${width}x${height}`;\n    const actualOutput = output ? `/output=${output}` : ``;\n    const actualDebug = debug && Platform.OS === 'web' ? `/debug` : ``;\n\n    return noCatchAll\n        ? `${domain}/${VERSION}${actualDebug}/${transform}${actualOutput}/${\n              noCatchAll[1] ? `` : `image:`\n          }${path}`\n        : `${domain}/${path}${\n              noQuery ? `?` : `&`\n          }twic=${VERSION}${actualDebug}/${transform}${actualOutput}`;\n};\n\nexport const computeStyle = (value: any, ratio: number | undefined) => {\n    if (ratio) {\n        let tmp = value || {};\n        if (Array.isArray(value)) {\n            tmp = value.reduce((p, c) => {\n                return { ...p, ...c };\n            }, {});\n        }\n        tmp = JSON.parse(JSON.stringify(tmp));\n        tmp.height = undefined;\n        tmp.aspectRatio = 1 / ratio;\n        return tmp;\n    }\n    return value;\n};\n\nexport const computeWrapperStyle = (size: SizeObject, styles: any) => {\n    return StyleSheet.flatten([\n        styles.wrapper,\n        {\n            height: size.height\n        }\n    ]);\n};\n"],"names":[],"version":3,"file":"module.js.map"}